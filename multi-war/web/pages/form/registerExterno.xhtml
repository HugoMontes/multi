<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	template="/WEB-INF/templates/plantillaT.xhtml"
	xmlns:pe="http://primefaces.org/ui/extensions">

	<ui:define name="content">
		<p:growl id="messages" showDetail="true" showSummary="false" />

		<table>
			<tr>
				<td>
					<h:outputText value="Razón social:" styleClass="required-field"/>
				</td>
				<td>
					<h:outputText value="#{registerExternoBean.cooperativa.razonSocial}"/>
				</td>
				
				<td width="50px" />
				
				<td>
					<h:outputText value="NIM:" styleClass="required-field"/>
				</td>
				<td>
					<h:outputText value="#{registerExternoBean.cooperativa.nim}" />
				</td>
			</tr>
			
			<tr>
				<td>
					<h:outputText value="NIT:" styleClass="required-field"/>
				</td>
				<td>
					<h:outputText value="#{registerExternoBean.cooperativa.nit}" />
				</td>
				
				<td width="50px" />
				
				<td>
					<h:outputText value="NIAR:" styleClass="required-field"/>
				</td>
				<td>
					<h:outputText value="#{registerExternoBean.cooperativa.niar}" />
				</td>
			</tr>
			
		</table>
		
		
		
		<h:form id="frmRegistroExterno">
			
			<p:fieldset styleClass="legendNone" legend="Datos Generales">
				<table>
					<tr>
						<td><h:outputLabel for="idFechaExportacion" value="Fecha de exportación:" style="font-weight:bold" /></td>
						<td>
							<p:calendar id="idFechaExportacion" required="true" showOn="button" mask="true"
								value="#{registerExternoBean.transporteExterno.fechaExportacion}" label="Fecha de exportación"
								pattern="dd/MM/yyyy" showButtonPanel="false"
								locale="es">
							</p:calendar>
						</td>
					</tr>
				</table>
			</p:fieldset>
			
			<p:fieldset styleClass="legendNone" legend="1. Datos de la empresa solicitante">
			
				<table>
					<tr>
						<td>
							<!--  
							<h:outputLabel for="idRazonSocial" value="Razón Social:" style="font-weight:bold" />
							-->
							<h:outputLabel for="idNombreApellidos" value="Nombres y apellidos:" style="font-weight:bold" />
						</td>
						<td>
							<p:inputText id="idNombreApellidos" value="#{registerExternoBean.transporteExterno.solNombreApellido}" 
				            	required="true" label="Nombres y apellidos" size="60">
				            	<pe:keyFilter regEx="#{cons['exp.regular.alphanumeric.business.name']}"/>
				            </p:inputText>
							<!--  
							<p:inputText id="idRazonSocial" value="#{registerExternoBean.transporteExterno.solRazonSocial}" 
				            	required="true" label="Razón Social" size="60" onkeyup="return mayusText(this);">
				            	<pe:keyFilter regEx="#{cons['exp.regular.alphanumeric.business.name']}"/>
				            </p:inputText>
				            -->
						</td>
						
						
						<td width="50px" />
						
						<td>
							<h:outputLabel for="idDocIdentidad" value="Doc. Identidad:" style="font-weight:bold" />
						</td>
						<td>
							<p:inputText id="idDocIdentidad" value="#{registerExternoBean.transporteExterno.solCi}" 
				            	required="true" label="Doc. Identidad" size="60">
				            	<pe:keyFilter regEx="#{cons['exp.regular.numeric.integer']}"/>
				            </p:inputText>
							
						</td>
						
						<td>
				            <h:outputLabel for="idExpedido" value="Expedido en:" style="font-weight:bold" />
						</td>
						<td>
							<p:selectOneMenu id="idExpedido" required="true" label="Exp"
								filter="true" filterMatchMode="contains"
								style="width:50px" panelStyle="width:50px" effect="fade"
								value="#{registerExternoBean.transporteExterno.indEmitidoCi}">
								<f:selectItems value="#{registerExternoBean.selectCiExpedido}" />
							</p:selectOneMenu>
						</td>
						
					</tr>
					
					<tr>
						<td>
							<h:outputLabel for="idLaboratorio" value="Laboratorio:" style="font-weight:bold" />
							
						</td>
						<td>
						
							<p:selectOneMenu id="idLaboratorio" required="true" label="Exp"
								filter="true" filterMatchMode="contains"
								style="width:200px" panelStyle="width:200px" effect="fade"
								value="#{registerExternoBean.transporteExterno.indTipoLaboratorio}">
								<f:selectItems value="#{registerExternoBean.selectLaboratorio}" />
							</p:selectOneMenu>
							
							<!--  
							<p:inputText id="idLaboratorio" value="#{registerExternoBean.transporteExterno.solLaboratorio}" 
				            	required="true" label="Laboratorio" size="60" onkeyup="return mayusText(this);">
				            	<pe:keyFilter regEx="#{cons['exp.regular.alphanumeric.business.name']}"/>
				            </p:inputText>
				            -->
				            
							<!--  
							<p:inputText id="idNit" value="#{registerExternoBean.transporteExterno.solNit}" 
				            	required="true" label="NIT" size="60">
				            	<pe:keyFilter regEx="#{cons['exp.regular.numeric.integer']}"/>
				            </p:inputText>
				            -->
						</td>
						
						<td width="50px" />
						
						<td><h:outputLabel for="idNroAnalisis" value="Nro de Análisis:" style="font-weight:bold" /></td>
						<td>
							<p:inputText id="idNroAnalisis" value="#{registerExternoBean.transporteExterno.solNroAnalisis}" 
				            	required="true" label="Nro de Análisis" size="60">
				            	
				            </p:inputText>
						</td>
						
						<td/>
						<td/>
					</tr>
					
					<tr>
						<td>
							<!--  
							<h:outputLabel for="idNim" value="NIM:" style="font-weight:bold" />
							-->
							<h:outputLabel for="idIdM03" value="ID M-03:" style="font-weight:bold" />
							
						</td>
						<td>
							<p:inputText id="idIdM03" value="#{registerExternoBean.transporteExterno.solIdM}" 
				            	required="true" label="ID M-03" size="60">
				            	<!--  
				            	<pe:keyFilter regEx="#{cons['exp.regular.alphanumeric.business.name']}"/>
				            	-->
				            </p:inputText>
							<!--  
							<p:inputText id="idNim" value="#{registerExternoBean.transporteExterno.solNim}" 
				            	required="true" label="NIN" size="60">
				            	<pe:keyFilter regEx="#{cons['exp.regular.numeric.integer']}"/>
				            </p:inputText>
				            -->
						</td>
						
						<td width="50px" />
						
						<td><h:outputLabel for="idFacturaComercial" value="Factura Comercial:" style="font-weight:bold" /></td>
						<td>
							<p:inputText id="idFacturaComercial" value="#{registerExternoBean.transporteExterno.solFacturaComercial}" 
				            	required="true" label="Factura Comercial" size="60">
				            	<pe:keyFilter regEx="#{cons['exp.regular.numeric.integer']}"/>
				            </p:inputText>
						</td>
						<td/>
						<td/>
					</tr>
					
					<tr>
						<td>
							<h:outputLabel for="idNroActa" value="Acta de Verificación:" style="font-weight:bold" />
							
						</td>
						<td>
							<p:inputText id="idNroActa" value="#{registerExternoBean.transporteExterno.solNroActaVerificacion}" 
				            	required="true" label="Acta de Verificación" size="60">
				            	<pe:keyFilter regEx="#{cons['exp.regular.numeric.integer']}"/>
				            </p:inputText>
						</td>
						
						<td/>
						
						<td>
							
						</td>
						<td>
							
						</td>
						<td/>
						<td/>
					</tr>
					
				</table>
			</p:fieldset>
			
			<p:fieldset styleClass="legendNone" legend="2. Caracteristicas del mineral comercializado">
			
				<table>
					<tr>
						<td><h:outputLabel for="idMetalicos" value="Metalicos:"/></td>
						<td colspan="4">
							<p:inputText id="idMetalicos" value="#{registerExternoBean.transporteExterno.carLeyCampoUno}" 
				            	label="Metalicos" size="90" disabled="true">
				            </p:inputText>
						</td>
						
					</tr>
					
					<tr>	
						<td><h:outputLabel for="idNoMetalicos" value="No Metalicos:"/></td>
						<td colspan="4">
							<p:inputText id="idNoMetalicos" value="#{registerExternoBean.transporteExterno.carLeyCampoDos}" 
				            	label="No Metalicos" size="90" disabled="true">
				            </p:inputText>
						</td>
					</tr>
					
					<tr>
						
						<td colspan="4" align="center">
							<p:commandButton icon="ui-search" id="cmdMineral" title="Seleccionar Mineral" 
								value="Seleccionar minerales"
								actionListener="#{registerExternoBean.seleccionMinerales}" process="@this"
								update=":dlgMineral
										:frmMineral"
								oncomplete="PF('dlgMineralVar').show();"
								>
							</p:commandButton>
						</td>	
						
					</tr>	
					
					<tr>
						<td><h:outputLabel for="idPesoBrutoHumedo" value="Peso Bruto Humedo(Kg):" style="font-weight:bold" /></td>
						<td>
							<p:inputNumber id="idPesoBrutoHumedo" value="#{registerExternoBean.transporteExterno.carPesoBrutoHumedo}" 
				            	required="true" label="Peso Neto Bruto" size="28" decimalPlaces="5" decimalSeparator=".">
				            	
				            	<p:ajax listener="#{registerExternoBean.calculoFinal}" 
				            			update=":frmRegistroExterno:idPesoHumedo
				            					:frmRegistroExterno:idPesoNetoSeco
				            					" 
				            			process="@this"/>
										
				            </p:inputNumber>
				            <!--  
				            <p:watermark for="idPesoBrutoHumedo" value="Kg"/>
				            -->
						</td>
						
					</tr>
					
					<tr>
						<td><h:outputLabel for="idPresentacionProducto" value="Presentación del Producto:" style="font-weight:bold" /></td>
						<td>
							<p:selectOneMenu id="idPresentacionProducto" required="true" label="Mineral o Metal"
								filter="true" filterMatchMode="contains"
								style="width:152px" panelStyle="width:152px" effect="fade"
								value="#{registerExternoBean.transporteExterno.carIndPresentacionProd}">
								<f:selectItems value="#{registerExternoBean.selectPresentacion}" />
							</p:selectOneMenu>
						</td>
						
						
						<td width="50px" />
						
						<td><h:outputLabel for="idIara" value="Tara(Kg):" style="font-weight:bold" /></td>
						<td>
							<p:inputNumber id="idIara" value="#{registerExternoBean.transporteExterno.carLara}" 
				            	required="true" label="Tara" size="40" decimalPlaces="5" decimalSeparator=".">
				            	<pe:keyFilter regEx="#{cons['exp.regular.alphanumeric.business.name']}"/>
				            	
				            	<p:ajax listener="#{registerExternoBean.calculoFinal}" 
				            			update=":frmRegistroExterno:idPesoHumedo
				            					:frmRegistroExterno:idPesoNetoSeco
				            					" 
				            			process="@this"/>
				            	
				            </p:inputNumber>
						</td>
					</tr>
					
					<tr>
						<td><h:outputLabel for="idLote" value="Lote:" style="font-weight:bold" /></td>
						<td>
							<p:inputText id="idLote" value="#{registerExternoBean.transporteExterno.carLote}" 
				            	required="true" label="Lote" size="28">
				            	<!--  
				            	<pe:keyFilter regEx="#{cons['exp.regular.alphanumeric.business.name']}"/>
				            	-->
				            </p:inputText>
						</td>
						
						<td width="50px" />
						
						<td><h:outputLabel for="idPesoHumedo" value="Peso Neto Humedo(Kg):" style="font-weight:bold" /></td>
						<td>
							<p:inputNumber id="idPesoHumedo" value="#{registerExternoBean.transporteExterno.carPesoNetoHumedo}" 
				            	required="true" label="Peso Neto Humedo" size="40" decimalPlaces="5" decimalSeparator="."
				            	readonly="true">
				            	
				            </p:inputNumber>
						</td>
					</tr>
					
					<tr>
						<td><h:outputLabel for="idExportacionTotalParcial" value="Exportación Total/Parcial:" style="font-weight:bold" /></td>
						<td>
							<p:selectOneMenu id="idExportacionTotalParcial" required="true" label="Exportación Total/Parcial"
								filter="true" filterMatchMode="contains"
								style="width:152px" panelStyle="width:152px" effect="fade"
								value="#{registerExternoBean.transporteExterno.carIndExportTotalParcial}">
								<f:selectItems value="#{registerExternoBean.selectExpTotalParcial}" />
								
								<p:ajax listener="#{registerExternoBean.cargarTotalParcial}" 
										update=":frmRegistroExterno:idTotalParcialKg" process="@this"/>
							</p:selectOneMenu>
						</td>
						
						<td width="50px" />
						
						<td><h:outputLabel for="idHumedad" value="Humedad(%):" style="font-weight:bold" /></td>
						<td>
							<p:inputNumber id="idHumedad" value="#{registerExternoBean.transporteExterno.carHumedad}" 
				            	required="true" label="Humedad %" size="40" decimalPlaces="5" decimalSeparator=".">
				            	
				            	<p:ajax listener="#{registerExternoBean.calculoFinal}" 
				            			update=":frmRegistroExterno:idPesoHumedo
				            					:frmRegistroExterno:idPesoNetoSeco
				            					" 
				            			process="@this"/>
				            			
				            </p:inputNumber>
				            <p:watermark for="idHumedad" value="%"/>
						</td>
					</tr>
					
					<tr>
						<td><h:outputLabel for="idCatidadBultos" value="Cantidad Bultos:" style="font-weight:bold" /></td>
						<td>
							<p:inputText id="idCatidadBultos" value="#{registerExternoBean.transporteExterno.carCantidadBultos}" 
				            	required="true" label="Cantidad Bultos" size="28">
				            	<pe:keyFilter regEx="#{cons['exp.regular.numeric.integer']}"/>
				            </p:inputText>
						</td>
						
						<td width="50px" />
						
						<td><h:outputLabel for="idMerma" value="Merma(%):" style="font-weight:bold" /></td>
						<td>
							<p:inputNumber id="idMerma" value="#{registerExternoBean.transporteExterno.carMerma}" 
				            	required="true" label="Merma(Kg)" size="40" decimalPlaces="5" decimalSeparator=".">
				            	
				            	<p:ajax listener="#{registerExternoBean.calculoFinal}" 
				            			update=":frmRegistroExterno:idPesoHumedo
				            					:frmRegistroExterno:idPesoNetoSeco
				            					" 
				            			process="@this"/>
				            	
				            </p:inputNumber>
						</td>
					</tr>
					
					<tr>
						<td><h:outputLabel for="idDescripcionMineral" value="Descripción del Mineral:" style="font-weight:bold" /></td>
						<td>
							<p:selectOneMenu id="idDescripcionMineral" required="true" label="Descripción del Mineral"
								filter="true" filterMatchMode="contains"
								style="width:152px" panelStyle="width:152px" effect="fade"
								value="#{registerExternoBean.transporteExterno.carIndDescripcionMineral}">
								<f:selectItems value="#{registerExternoBean.selectDescripcionMineral}" />
							</p:selectOneMenu>
						</td>
						
						<td width="50px" />
						
						<td><h:outputLabel for="idPesoNetoSeco" value="Peso Neto Seco(Kg):" style="font-weight:bold" /></td>
						<td>
							<p:inputNumber id="idPesoNetoSeco" value="#{registerExternoBean.transporteExterno.carPesoNetoSeco}" 
				            	required="true" label="Peso Neto seco" size="40"
				            	decimalPlaces="5" decimalSeparator="." readonly="true">
				            	
				            </p:inputNumber>
						</td>
					</tr>
					
					<tr>
						<td><h:outputLabel for="idTotalParcialKg" value="Total Parcial(kg):" style="font-weight:bold" /></td>
						<td>
				            
							<p:inputNumber id="idTotalParcialKg" value="#{registerExternoBean.transporteExterno.carCantidadTotalParcial}" 
				            	required="#{registerExternoBean.transporteExterno.carIndExportTotalParcial.intValue() == 142}" label="Cantidad Bultos" size="28"
				            	disabled="#{registerExternoBean.transporteExterno.carIndExportTotalParcial.intValue() == 141}"
				            	decimalPlaces="2" decimalSeparator=".">
				            	<!--  
				            	<pe:keyFilter regEx="#{cons['exp.regular.numeric.integer']}"/>
				            	-->
				            </p:inputNumber>
						</td>
						
						<td width="50px" />
					</tr>
					
					
				</table>
			</p:fieldset>
			
			
			<p:fieldset styleClass="legendNone" legend="3. Origen del mineral Transporte">
				<table>
					<tr>
						<td><h:outputLabel for="idDepartamentoProductor" value="Departamento Productor:" style="font-weight:bold" /></td>
						<td>
							<p:selectOneMenu id="idDepartamentoProductor" required="true" label="Departamento Productor"
								filter="true" filterMatchMode="contains"
								style="width:152px" panelStyle="width:152px" effect="fade"
								value="#{registerExternoBean.transporteExterno.idDepartamento.id}">
								<f:selectItems value="#{registerExternoBean.selectDepartamento}" />
								
								<p:ajax listener="#{registerExternoBean.cargarMunicipio}" update=":frmRegistroExterno:idMunicipioProductor" process="@this"/>
							</p:selectOneMenu>
						</td>
					</tr>
					
					<tr>
						<td><h:outputLabel for="idMunicipioProductor" value="Municipio Productor:" style="font-weight:bold" /></td>
						<td>
							<p:selectOneMenu id="idMunicipioProductor" required="true" label="Municipio Productor"
								filter="true" filterMatchMode="contains"
								style="width:150px" panelStyle="width:150px" effect="fade"
								value="#{registerExternoBean.transporteExterno.idMunicipio.id}">
								<f:selectItems value="#{registerExternoBean.selectMunicipio}" />
								
								<p:ajax update=":frmRegistroExterno:idCodigoProductor" process="@this"/>
							
							</p:selectOneMenu>
						</td>
						
						<td width="50px" />
						
						<td><h:outputLabel value="Codigo Productor:" style="font-weight:bold" /></td>
						<td>
							<h:outputLabel id="idCodigoProductor" value="#{registerExternoBean.mapCodigoMunicipio.get(registerExternoBean.transporteExterno.idMunicipio.id)}"/>
							<!--  
							<p:inputText id="idCodigoProductor" value="#{registerExternoBean.mapCodigoMunicipio.get(registerExternoBean.transporteExterno.idMunicipio.id)}" 
				            	required="true" label="Codigo Productor" size="30">
				            	<pe:keyFilter regEx="#{cons['exp.regular.alphanumeric.business.name']}"/>
				            </p:inputText>
				            -->
						</td>
					</tr>
					
				</table>
			</p:fieldset>
			
			<p:fieldset styleClass="legendNone" legend="4. Destino Mineral">
				<table>
					<tr>
						<td><h:outputLabel for="idPaisDestino" value="País Destino:" style="font-weight:bold" /></td>
						<td>
							<p:selectOneMenu id="idPaisDestino" required="true" label="País Destino"
								filter="true" filterMatchMode="contains"
								style="width:252px" panelStyle="width:252px" effect="fade"
								value="#{registerExternoBean.transporteExterno.idPais.id}">
								<f:selectItems value="#{registerExternoBean.selectPais}" />
								
							</p:selectOneMenu>
						</td>
						
						<td width="50px" />
						
						<td>
							<h:outputLabel for="idAduanaSalida" value="Aduana de salida:" style="font-weight:bold" />
							</td>
						<td>
							<p:selectOneMenu id="idAduanaSalida" required="true" label="Aduana de salida"
								filter="true" filterMatchMode="contains"
								style="width:200px" panelStyle="width:200px" effect="fade"
								value="#{registerExternoBean.transporteExterno.indAduanaSalida}">
								<f:selectItems value="#{registerExternoBean.selectAduanaSalida}" />
								
								<p:ajax update=":frmRegistroExterno:idCodigoAduana" process="@this"
										listener="#{registerExternoBean.seleccionCodigoAduana}"/>
								
							</p:selectOneMenu>
							
						</td>
					
					</tr>
					
					<tr>
						<td><h:outputLabel for="idRazonSocialComprador" value="Razón Social Comprador:" style="font-weight:bold" /></td>
						<td>
							<p:inputText id="idRazonSocialComprador" value="#{registerExternoBean.transporteExterno.destRazonSocialComprador}" 
				            	required="true" label="Lote" size="48">
				            </p:inputText>
						</td>
						
						<td width="50px" />
						
						<td><h:outputLabel for="idCodigoAduana" value="Código Aduana:" style="font-weight:bold" /></td>
						<td>
							<p:inputText id="idCodigoAduana" value="#{registerExternoBean.transporteExterno.destCodAduana}" 
				            	required="true" label="Código Aduana" size="30" disabled="true">
				            </p:inputText>
						</td>	
						
					</tr>
					
					<tr>
						<td><h:outputLabel for="idTipoTransporte" value="Tipo Transporte:" style="font-weight:bold" /></td>
						<td>
							<p:selectOneMenu id="idTipoTransporte" required="true" label="País Destino"
								filter="true" filterMatchMode="contains"
								style="width:252px" panelStyle="width:252px" effect="fade"
								value="#{registerExternoBean.transporteExterno.destIndTipoTransporte}">
								<f:selectItems value="#{registerExternoBean.selectTipoTransporte}" />
							</p:selectOneMenu>
						</td>
					</tr>
				</table>
			</p:fieldset>
			
			<p:fieldset styleClass="legendNone" legend="5. Datos del conductor">
				<table>
					
					<tr>
						<td><h:outputText for="idNombreConductor" value="Nombre conductor:" style="font-weight:bold" /></td>
						<td>
							<p:inputText id="idNombreConductor" value="#{registerExternoBean.transporteExterno.condNombreConductor}"
				            	required="true" label="Nombre conductor" size="50" onkeyup="return mayusText(this);">
				            	<pe:keyFilter regEx="#{cons['exp.regular.alphanumeric.business.name']}"/>
				            </p:inputText>
						</td>
						
						<td width="50px" />
						
						<td><h:outputText for="idNombrePlacaControl" value="Placa de Control:" style="font-weight:bold" /></td>
						<td>
							<p:inputText id="idNombrePlacaControl" value="#{registerExternoBean.transporteExterno.condPlacaControl}"
				            	required="true" label="Placa de Control" size="50" onkeyup="return mayusText(this);">
				            	<pe:keyFilter regEx="#{cons['exp.regular.alphanumeric.business.name']}"/>
				            </p:inputText>
						</td>
						
					</tr>
					
					<tr>
						<td><h:outputText for="idLicenciaConductor" value="Licencia de Conducir:" style="font-weight:bold" /></td>
						<td>
							<p:inputText id="idLicenciaConductor" value="#{registerExternoBean.transporteExterno.condLicenciaConductor}"
				            	required="true" label="Licencia Conductor" size="50">
				            	<pe:keyFilter regEx="#{cons['exp.regular.numeric.integer']}"/>
				            </p:inputText>
						</td>
						
						<td/>
						
						<td>
				            <!--  
				            <h:outputLabel for="idExpedidoLicencia" value="Expedido en:" style="font-weight:bold" />
				            -->
						</td>
						<td>
							<!--  
							<p:selectOneMenu id="idExpedidoLicencia" required="true" label="Exp"
								filter="true" filterMatchMode="contains"
								style="width:150px" panelStyle="width:150px" effect="fade"
								value="#{registerExternoBean.transporteExterno.indEmitidoLicencia}">
								<f:selectItems value="#{registerExternoBean.selectCiExpedido}" />
							</p:selectOneMenu>
							-->
						</td>
						
					</tr>
					
					<tr>
						<td><h:outputText for="idCaracteristicasVehiculo" value="Carasterísticas Vehiculo:" style="font-weight:bold" /></td>
						<td colspan="4">
							<p:inputText id="idCaracteristicasVehiculo" value="#{registerExternoBean.transporteExterno.condCaracteristicaVehiculo}"
				            	required="true" label="Carasterísticas Vehiculo" size="100">
				            </p:inputText>
						</td>
					</tr>
				</table>
			</p:fieldset>
			
			
			<p:toolbar>
				<f:facet name="left">
					<p:commandButton value="Guardar" icon="ui-save" id="cmdGuardar"
						actionListener="#{registerExternoBean.guardarFormulario}" process="@form"
						update="@form :messages">
					</p:commandButton>
				</f:facet>
			</p:toolbar>
	
		</h:form>
		
		<p:dialog id="dlgMineral" widgetVar="dlgMineralVar" appendTo="@(body)"
			showEffect="explode" hideEffect="clip" position="center"  height="500px"
			closable="false" resizable="false" width="800" modal="true" 
			header="#{registerExternoBean.strTitulo}">
			
			<h:form id="frmMineral">
				<p:panel id="pnlMineral">
					<table>
						<tr>
							<td width="50%">
								<p:dataTable id="tblMetalicos" var="met"  
									value="#{registerExternoBean.listMineralTodoMetal}"
									rowKey="#{met.id}"
									selection="#{registerExternoBean.listMineralMetalSelect}"
									emptyMessage="#{cons['dtb.empty.page.table']}"
									>
					
									<p:column selectionMode="multiple" style="width:3%;text-align:center"/>
									
									<p:column headerText="Metalicos" 
										style="white-space:normal;" width="10%">
										<h:outputText value="#{met.otroUno}" />
									</p:column>
									
									<p:column headerText="Ley" 
										style="white-space:normal;" width="9%">
										<p:inputText id="idLeyMetalicos" value="#{met.otroDos}"
							            	size="9">
							            </p:inputText>
									</p:column>
									
									<p:column headerText="Tipo"
										style="white-space:normal;" width="8%">
							            <p:selectOneMenu id="idTodoMetalicoSelect" label="Opcion"
											style="width:10px" panelStyle="width:10px" effect="fade"
											value="#{met.otroTres}">
											<f:selectItems value="#{registerExternoBean.selectOpcionMineral}" />
										</p:selectOneMenu>
							         </p:column>
									
								</p:dataTable>
								
							</td>
							
							<td width="2px">
							</td>
							
							<td width="50%">
								<p:dataTable id="tblNoMetalicos" var="noMet"
									value="#{registerExternoBean.listMineralTodoNoMetal}"
									rowKey="#{noMet.id}"
									selection="#{registerExternoBean.listMineralNoMetalSelect}"
									emptyMessage="#{cons['dtb.empty.page.table']}">
					
									<p:column selectionMode="multiple" style="width:3%;text-align:center"/>
									
									<p:column headerText="No Metalicos" 
										style="white-space:normal;" width="10%">
										<h:outputText value="#{noMet.otroUno}" />
									</p:column>
									
									<p:column headerText="Ley" 
										style="white-space:normal;" width="9%">
										
										<p:inputText id="idLeyNoMetalicos" value="#{noMet.otroDos}"
							            	size="9">
							            </p:inputText>
									</p:column>
									
									<p:column headerText="Tipo"
										style="white-space:normal;" width="8%">
							            <p:selectOneMenu id="idTodoMetalicoSelect" label="Opcion"
											style="width:10px" panelStyle="width:10px" effect="fade"
											value="#{noMet.otroTres}">
											<f:selectItems value="#{registerExternoBean.selectOpcionMineral}" />
										</p:selectOneMenu>
							         </p:column>
									
								</p:dataTable>
							</td>
						</tr>
					</table>
						
					<p:toolbar>
						<f:facet name="left">
							<p:commandButton process="@form" value="Seleccionar" id="cmdCerrar"
								icon="ui-save"
								update=":frmRegistroExterno:idMetalicos
										:frmRegistroExterno:idNoMetalicos"
								actionListener="#{registerExternoBean.mineralesSeleccionados}"
								oncomplete="PF('dlgMineralVar').hide();">
							</p:commandButton>
							
							<p:separator />
							<p:commandButton value="Cancelar" id="cmdCancelar"
								icon="ui-remove"
								onclick="PF('dlgMineralVar').hide();">
							</p:commandButton>
						</f:facet>
					</p:toolbar>
				</p:panel>
			</h:form>
		</p:dialog>		
		
		<p:confirmDialog global="true" showEffect="fade" hideEffect="fade" closable="false">
	        <p:commandButton value="Si" type="button" styleClass="ui-confirmdialog-yes" icon="ui-icon-check"/>
	        <p:commandButton value="No" type="button" styleClass="ui-confirmdialog-no" icon="ui-icon-close" />
	    </p:confirmDialog>
	    
		<script type="text/javascript">
			function enviarFormSucursal(xhr, status, args) {
				if( undefined == args.validationFailed &amp;&amp; args.sinErrores) {
					  PF('dlgSucursalVar').hide();
					  PF('tblOficinaVar').unselectAllRows(); PF('tblOficinaVar').clearFilters();
				  } else {  
				    	PF('dlgSucursalVar').jq.effect("shake", {times:2}, 100);
				    	
				  }  
		    }

	</script>

	</ui:define>
</ui:composition>